## 如果Loss异常怎么办?
首先我所指的Loss异常是说Loss计算出现了明显的逻辑错误,而不是因为优化导致Loss不收敛,Nan这类问题.
### 一个令人悲伤的话题
我之前曾改造了一个网络使,相应地对loss部分做出了一些改动.结果训练时一开始发现Loss大的离谱,后来改了一些bug结果Loss成了负数!?这个问题就很尴尬了,Loss怎么可能为负数呢.最后经过仔细排查发现是数据标注出现了错误.我是基于原作者代码进行的修改,当时对数据打标签的一些代码细节并没有彻底读懂,因此在改动的时候考虑不全面,闹出了Loss为负数这个天大的笑话.其实bug难免,不要指望自己一遍就对,但是在做任务前要有一个清晰的概念,对基本的数学和逻辑原理都要心中有数;如果是改造别人的代码,需要对他的代码有比较彻底的了解,防止忽视一些细节导致Bug发生.  
**经此一事,总结了Loss异常Debug的一些心得体会:**
#### Loss异常Debug思路:
1.仔细检查Loss函数的设计逻辑,是否正常,如果loss由多部分组成,可以分别输出检查是否正常,缩小范围
2.检查具体实现的函数代码,看看是不是函数细节用的不对,数据转换错误以及axis指定的是否正确,尤其要注意array索引是否指定正确.
3.如果上面都没有问题,需要检查输入数据是否正常,可以输出array或者将Label可视化为图片
>Tips:不要以为Label图片显示正常对应的Label源数据就没有问题!图片可能只用到了Label部分信息,不代表Label就是完全正确的!
#### 数据异常Debug思路:
* 宏观的观察数据内容可以迅速检查错误,在认为可能出问题数据的地方加入断点,使用pycharm的sciView模式,观察array数据分布
>Tips:python console和Expression搭配Debug效果更好哦

![ pycharm_debug](leanote://file/getImage?fileId=5c8f67deab644157e70065c6)

* 学会使用使用np.where(),sum()等统计函数验证自己的怀疑点, 首先假设数据正常,应该服从什么样的分布,然后使用一些函数或代码段去验证
如果数据是图像,可以直接可视化看一下图片有没有什么问题.
* 要学会分析Loss的含义,从数学角度入手,去分析什么操作会导致Loss异常